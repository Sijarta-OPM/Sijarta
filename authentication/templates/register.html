{% extends 'base.html' %}

{% block title %}Register{% endblock %}

{% block content %}
    <h2>Register</h2>
    
    <form method="POST">
        {% csrf_token %}
        
        <!-- Pilihan Role -->
        <label for="role">Role:</label>
        <select name="role" id="role" onchange="toggleFormFields()" required>
            <option value="PENGGUNA">Pengguna</option>
            <option value="PEKERJA">Pekerja</option>
        </select><br><br>

        <!-- Form Umum -->
        <div id="common-form">
            <label for="username">Username:</label>
            <input type="text" name="username" required><br>

            <label for="password">Password:</label>
            <input type="password" name="password" required><br>

            <label for="nama">Nama:</label>
            <input type="text" name="nama" required><br>

            <label for="no_hp">No HP:</label>
            <input type="text" name="no_hp" required><br>

            <label for="alamat">Alamat:</label>
            <textarea name="alamat" required></textarea><br>

            <label for="tanggal_lahir">Tanggal Lahir:</label>
            <input type="date" name="tanggal_lahir" required><br>
        </div>

        <!-- Form untuk Pekerja -->
        <div id="pekerja-form" style="display: none;">
            <h3>Data Tambahan untuk Pekerja</h3>

            <label for="nama_bank">Nama Bank:</label>
            <input type="text" name="nama_bank"><br>

            <label for="nomor_rekening">Nomor Rekening:</label>
            <input type="text" name="nomor_rekening"><br>

            <label for="npwp">NPWP:</label>
            <input type="text" name="npwp"><br>

            <label for="link_foto">Link Foto:</label>
            <input type="text" name="link_foto"><br>
        </div>

        <button type="submit">Register</button>
    </form>

    <p>Sudah punya akun? <a href="{% url 'authentication:login' %}">Login di sini</a></p>

    <script>
        function toggleFormFields() {
            var role = document.getElementById("role").value;
            document.getElementById("pekerja-form").style.display = role === "PEKERJA" ? "block" : "none";
        }
    </script>
{% endblock %}
